<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="otherbot.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <title>Chose your Bot type</title>
    <script src="../dropsownmenu.js"></script>
</head>
<body>
    <header>
        <a href="../index.html" class="logo">&#9001; antterzn•dev &#9002;</a>

        <div class="navbar">
            <div class="navlinks">
                <a href="index.html">Home</a>
                <a href="products.html">Products</a>
                <a href="login/login.html" class="profile"><ion-icon name="person"></ion-icon></a>
            </div>
            <div class="menubtn" id="menubtn">
                <ion-icon name="menu-sharp"></ion-icon>
            </div>
        </div>

        <div class="dropdownmenu" id="dropdownmenu">
            <a href="../index.html">Home</a>
            <a href="../products.html">Products</a>
            <a href="../login/login.html" class="profile"><ion-icon name="person"></ion-icon></a>
        </div>
    </header>

    <main>

        <div class="navigation">
            <div class="links">
                <a href="../index.html">Home</a>
                <p>></p>
                <a href="../botlists.html">Bots Discord</a>
                <p>></p>
                <p style="font-weight: 600;">Other</p>
            </div>
            <p>2/2</p>
        </div>

        <div class="section1">
            <h2>Let's custom your bot !</h2>
            <div class="subtitle" style="margin-bottom: 50px;">
                <p>In this page, you will have to give few informations about the bot you want</p>
            </div>

            <div class="questionnaire">
                <div class="question">
                    <h4 class="label">Please describe the more completely as possible your bot</h4>
                    <textarea id="bot-description" rows="5" placeholder="I want a bot to protect my server..."></textarea>
                </div>
            </div>
        </div>

        <div class="order-now">
            <h2>Order Now</h2>
            <p>I will determine the price of your request as soon as possible and I will send an email to inform you about it</p>
            <p>Please enter your <b>email address</b> in the field below :</p>
            <input type="email" name="Email-box" id="customer-email" placeholder="example@gmail.com" required>
            <p id="email-error" style="color:red;display:none;">Please enter a valid email address.</p>
            <p>I will receive your order and contact you very soon in order to have more precision about your Custom Bot.</p>
            <button class="orderbtn">PROCEED ORDER</button>
            <p id="success-order" style="color: rgb(83, 255, 83); font-weight: 700; display: none;">YOUR ORDER HAS BEEN SUCCESSFULLY SENT</p>
        </div>
    </main>
</body> 

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const orderBtn = document.querySelector('.orderbtn');
        const emailInput = document.getElementById('customer-email');
        const emailError = document.getElementById('email-error');
        const successText = document.getElementById('success-order');
        const descriptionInput = document.getElementById('bot-description');

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(String(email).toLowerCase());
        }

        function handleOrderClick(event) {
            event.preventDefault();
            const emailValue = emailInput.value;
            const descriptionValue = descriptionInput.value;

            if (!validateEmail(emailValue)) {
                emailError.style.display = 'block';
            } else {
                emailError.style.display = 'none';

                const orderDetails = {
                    description: descriptionValue,
                    email: emailValue,
                    orderDate: new Date().toLocaleString()
                };

                // Envoi des données au serveur pour stockage dans un fichier JSON
                fetch('order_handler.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(orderDetails),
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        console.log('Your order has been placed successfully!');
                        successText.style.display = 'block';
                    } else {
                        alert('There was an error processing your order.');
                    }
                })
                .catch((error) => {
                    console.error('Error:', error);
                    alert('There was an error processing your order.');
                });
            }
        }

        orderBtn.addEventListener('click', handleOrderClick);
    });

</script>
</html>