<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../product_page.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <title>Basic 1 | Boost Bot</title>
    <script src="../dropsownmenu.js"></script>
</head>
<body>
    <header>
        <a href="../index.html" class="logo">&#9001; antterzn•dev &#9002;</a>

        <div class="navbar">
            <div class="navlinks">
                <a href="../index.html">Home</a>
                <a href="../products.html">Products</a>
                <a href="../login/login.html" class="profile"><ion-icon name="person"></ion-icon></a>
            </div>
            <div class="menubtn" id="menubtn">
                <ion-icon name="menu-sharp"></ion-icon>
            </div>
        </div>

        <div class="dropdownmenu" id="dropdownmenu">
            <a href="../index.html">Home</a>
            <div>
                <a id="products"><ion-icon name="caret-forward-sharp" id="showProductsIcon"></ion-icon>Products</a>
                <ul class="sub-products" id="sub-products">
                    <li><a href="../products.html">All my products</a></li>
                    <li><a href="../botlists.html">Discord Bots</a></li>
                    <li><a href="#">Websites</a></li>
                </ul>
            </div>
            <a href="../login/login.html" class="profile"><ion-icon name="person"></ion-icon>Login</a>
            <div class="dropdownheader">
                <a href="../index.html" class="logo">&#9001; antterzn•dev &#9002;</a>
                <a  id="close"><ion-icon name="close-sharp"></ion-icon></a>
            </div>
        </div>
    </header>

    <main>
        <div class="navigation">
            <div class="links">
                <a href="../index.html">Home</a>
                <p>></p>
                <a href="../botlists.html">Bots Discord</a>
                <p>></p>
                <a href="../boostbots.html">Boost Server Bot</a>
                <p>></p>
                <p style="font-weight: 600;">Basic 1</p>
            </div>
            <p class="pagenumber">3/3</p>
        </div>

        <div class="price">
            20€
        </div>

        <h1>Personnalize and order your <span style="color: #006C8D; background-color: antiquewhite;">Basic 1</span> !</h1>

        <div class="preferences">
            <h2>Bot features</h2>

            <div class="features-list">
                <label>
                    <input type="checkbox" checked disabled>
                    <span class="custom-checkbox"></span>
                    <span class="text">Select service with buttons</span>
                </label>
                <label>
                    <input type="checkbox" checked disabled>
                    <span class="custom-checkbox"></span>
                    <span class="text">3 services</span>
                </label>
                <label>
                    <input type="checkbox" checked disabled>
                    <span class="custom-checkbox"></span>
                    <span class="text">"/ticket close" to close a ticket channel</span>
                </label>
                <label>
                    <input type="checkbox" checked disabled>
                    <span class="custom-checkbox"></span>
                    <span class="text">Request tracking</span>
                </label>
                <label>
                    <input type="checkbox" checked disabled>
                    <span class="custom-checkbox"></span>
                    <span class="text">"/clear" command to clear all messages in a channel</span>
                </label>

                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Auto-delete tickets after 5 days of inactivity (+4€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Add a service (+4€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Opened by {user} on {date and time} information on the recap (+3€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Notion website with logs of all the tickets (+7€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">When a ticket is created in your server, receive a mail/SMS with its informations (+7€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Add a command in the bot (+7€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Add a command to create embeds (+5€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Auto calcul of the request price (+5€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Orders Rating (+7€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Add a command to make giveaways (+10€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">Be able to change the bot language (+7€)</span>
                </label>
                <label>
                    <input type="checkbox">
                    <span class="custom-checkbox"></span>
                    <span class="text">An embed that follows the ticket summary to explain how to pay (+3€)</span>
                </label>
            </div>
        </div>

        <div class="gallery">
            <h2>Photo Gallery</h2>
            <p>These are pictures of the Basic 1 with the basic features made for Brawl Stars</p>
            <div class="photos">
                <img src="../assets/basic1/1.png" alt="">
                <img src="../assets/basic1/2.png" alt="">
                <img src="../assets/basic1/3.png" alt="">
                <img src="../assets/basic1/4.png" alt="">
            </div>
        </div>
    </main>
    <div class="order-now">
        <h2>Order Now</h2>
        <p>1. Please send the needed amount <b>(<span id="price-order" style="color: white;"></span>€)</b> to me by clicking the link below :</p>
        <a href="https://www.paypal.com/paypalme/antterzn"  class="paypal" target="_blank"><ion-icon name="logo-paypal"></ion-icon> antterzn on PayPal <ion-icon name="logo-paypal"></ion-icon></a>
        <p>2. Please enter your email address in the field below :</p>
        <input type="email" name="Email-box" id="customer-email" placeholder="example@gmail.com" required>
        <p id="email-error" style="color:red;display:none;">Please enter a valid email address.</p>
        <p>I will receive your order and contact you very soon in order to have more precision about your Basic 1.</p>

        <label>
            <input type="checkbox" id="accept-tcs">
            <span class="custom-checkbox"></span>
            <span class="text" style="color: white; font-weight: 600; display: flex; flex-wrap: wrap; align-items: center; gap: 10px;">I have read and understood the <a href="../cgv/index.html" class="tcs">Terms and Conditions of Sales</a><p class="required-tcs">required</p></span>
        </label>

        <button class="orderbtn" disabled>PROCEED ORDER</button>
        <p id="success-order" style="color: rgb(83, 255, 83);; font-weight: 700; display: none;">YOUR ORDER HAS BEEN SUCCESSFULLY SENT</p>
    </div>
    

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const basePrice = 20;
            const priceBubble = document.querySelector('.price');
            const checkboxes = document.querySelectorAll('.features-list input[type="checkbox"]:not([disabled])');
            const orderBtn = document.querySelector('.orderbtn');
            const emailInput = document.getElementById('customer-email');
            const emailError = document.getElementById('email-error');
            const successText = document.getElementById('success-order');
            const priceOrder = document.getElementById('price-order');
            const acceptTcsCheckbox = document.getElementById('accept-tcs');

            function updatePrice() {
                let totalPrice = basePrice;

                checkboxes.forEach(checkbox => {
                    if (checkbox.checked) {
                        const priceText = checkbox.parentNode.querySelector('.text').textContent;
                        const additionalPriceMatch = priceText.match(/\+\d+€/);
                        if (additionalPriceMatch) {
                            const additionalPrice = parseInt(additionalPriceMatch[0].replace('+', '').replace('€', ''));
                            totalPrice += additionalPrice;
                        }
                    }
                });

                priceBubble.textContent = totalPrice + '€';
                priceOrder.textContent = totalPrice
            }

            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(String(email).toLowerCase());
            }

            function handleOrderClick(event) {
                event.preventDefault();
                const emailValue = emailInput.value;

                if (!validateEmail(emailValue)) {
                    emailError.style.display = 'block';
                } else {
                    emailError.style.display = 'none';

                    const selectedFeatures = [];
                    checkboxes.forEach(checkbox => {
                        if (checkbox.checked) {
                            const featureText = checkbox.parentNode.querySelector('.text').textContent;
                            selectedFeatures.push(featureText);
                        }
                    });

                    const orderDetails = {
                        botName: "Basic 1",
                        price: priceBubble.textContent,
                        features: selectedFeatures,
                        email: emailValue,
                        orderDate: new Date().toLocaleString()
                    };

                    // Envoi des données au serveur pour stockage dans un fichier JSON
                    fetch('order_handler.php', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(orderDetails),
                    })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            console.log('Your order has been placed successfully!');
                            successText.style.display = 'flex';
                        } else {
                            alert('There was an error processing your order.');
                        }
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        alert('There was an error processing your order.');
                    });
                }
            }

            function toggleOrderButton() {
                orderBtn.disabled = !acceptTcsCheckbox.checked;
            }

            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updatePrice);
            });

            acceptTcsCheckbox.addEventListener('change', toggleOrderButton);
            orderBtn.addEventListener('click', handleOrderClick);

            toggleOrderButton(); // Vérification initiale de l'état du bouton
            updatePrice(); // Calcul initial du prix
        });
    </script>
</body>
</html>